<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
</head>
<body>
	<script type="text/javascript" src="source/EventManager.js"></script>
	<script type="text/javascript" src="source/WindowManager.js"></script>
	<script type="text/javascript" src="source/WindowMessage.js"></script>
	<script type="text/javascript" src="source/WindowSession.js"></script>
	<script type="text/javascript">
		var text = document.createElement("div");
		text.innerHTML = "Window A";
		document.body.append(text);

		var manager = new WindowManager("A");
		manager.onBroadcastMessage = function(data, authentication)
		{
			console.log("Broadcast Message received", data, authentication);
		};
		
		var session = manager.openSession("another.html", "B");
		var sessionIndirect;

		session.onReady = function()
		{
			console.log("Session B is ready.");
			session.sendMessage("Test message from A to B");

			
		};
		session.onMessage = function(data, authentication)
		{
			console.log("Session B message received", data, authentication);
		};
		session.onClose = function()
		{
			console.log("Session B closed");
		};

		function openC()
		{
			sessionIndirect = manager.openSession("yetanother.html", "C");
			sessionIndirect.onReady = function()
			{
				console.log("Session C is ready.");
			};
		}

	</script>
</body>
</html>